{"ast":null,"code":"import _slicedToArray from\"C:/Users/saike/Desktop/CTS/onlineshopping_cts_ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{checkLogin}from\"../store/slice/UserSlice\";import{useDispatch}from\"react-redux\";import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var navigate=useNavigate();var dispatch=useDispatch();var _useState=useState(),_useState2=_slicedToArray(_useState,2),loginId=_useState2[0],setloginId=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),hasError=_useState6[0],setHasError=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),ErrorMessage=_useState8[0],setErrorMessage=_useState8[1];function handleSubmit(evt){evt.preventDefault();dispatch(checkLogin({loginId:loginId,password:password})).unwrap().then(function(originalPromiseResult){if(originalPromiseResult.isSuccess){localStorage.setItem(\"LoginId\",loginId);localStorage.setItem(\"isAdmin\",originalPromiseResult.user.isAdmin);navigate(\"/Products\",{state:{userDetails:originalPromiseResult.user}});}else{setHasError(true);setErrorMessage(originalPromiseResult.message);return;}}).catch(function(rejectedValueOrSerializedError){setHasError(true);setErrorMessage(rejectedValueOrSerializedError);return;});};function handleInputChange(e){switch(e.target.id){case\"loginId\":setloginId(e.target.value);setHasError(false);break;case\"password\":setPassword(e.target.value);setHasError(false);break;default:break;}}return/*#__PURE__*/_jsx(\"section\",{className:\"h-100 h-custom\",style:{backgroundColor:\"#8fc4b7\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"container py-5 h-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row d-flex justify-content-center align-items-center h-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-8 col-xl-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card rounded-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body p-4 p-md-5\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mb-4 pb-2 pb-md-0 mb-md-5 px-md-2\",children:\"Login\"}),hasError&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:[ErrorMessage,\", Please verify\"]}),/*#__PURE__*/_jsxs(\"form\",{className:\"px-md-2\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-outline mb-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"loginId\",placeholder:\"Login Id*\",onChange:function onChange(e){return handleInputChange(e);},required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-outline mb-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"Password*\",id:\"password\",onChange:function onChange(e){return handleInputChange(e);},required:true})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-dark btn-lg mb-1\",children:\"Login\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-5\",children:[\"Not a member?\",/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-link\",onClick:function onClick(){return navigate(\"/Register\");},children:\" Register \"})]})]})})})})})});}export default Login;","map":{"version":3,"names":["checkLogin","useDispatch","React","useState","useNavigate","Login","navigate","dispatch","loginId","setloginId","password","setPassword","hasError","setHasError","ErrorMessage","setErrorMessage","handleSubmit","evt","preventDefault","unwrap","then","originalPromiseResult","isSuccess","localStorage","setItem","user","isAdmin","state","userDetails","message","catch","rejectedValueOrSerializedError","handleInputChange","e","target","id","value","backgroundColor"],"sources":["C:/Users/saike/Desktop/CTS/onlineshopping_cts_ui/src/components/Login.js"],"sourcesContent":["import { checkLogin } from \"../store/slice/UserSlice\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nfunction Login() {\r\n  const navigate = useNavigate();\r\n  \r\n  const dispatch = useDispatch();\r\n  const [loginId, setloginId] = useState();\r\n  const [password, setPassword] = useState();\r\n  const [hasError, setHasError] = useState(false);\r\n  const [ErrorMessage, setErrorMessage] = useState();\r\n\r\n  function handleSubmit (evt)  {\r\n    evt.preventDefault();\r\n\r\n    dispatch(checkLogin({ loginId: loginId, password: password }))\r\n      .unwrap()\r\n      .then((originalPromiseResult) => {\r\n        if (originalPromiseResult.isSuccess) {\r\n\r\n          localStorage.setItem(\"LoginId\", loginId);\r\n          localStorage.setItem(\"isAdmin\",originalPromiseResult.user.isAdmin)\r\n          navigate(\"/Products\",{state:{userDetails:originalPromiseResult.user}});\r\n          \r\n        } else {\r\n          setHasError(true);\r\n          setErrorMessage(originalPromiseResult.message);\r\n          return;\r\n        }\r\n      })\r\n      .catch((rejectedValueOrSerializedError) => {\r\n        setHasError(true);\r\n        setErrorMessage(rejectedValueOrSerializedError);\r\n        return;\r\n      });\r\n  };\r\n\r\n  function handleInputChange(e){\r\n    switch (e.target.id){\r\n      case \"loginId\":\r\n        setloginId(e.target.value);\r\n        setHasError(false);\r\n      break;\r\n\r\n      case \"password\":\r\n        setPassword(e.target.value);\r\n        setHasError(false)\r\n      break;\r\n\r\n      default:\r\n        break;\r\n\r\n    }\r\n  }\r\n  return (\r\n    <section className=\"h-100 h-custom\" style={{ backgroundColor: \"#8fc4b7\" }}>\r\n    <div className=\"container py-5 h-100\">\r\n    <div className=\"row d-flex justify-content-center align-items-center h-100\">\r\n\r\n          <div className=\"col-lg-8 col-xl-6\">\r\n            <div className=\"card rounded-3\">\r\n              <div className=\"card-body p-4 p-md-5\">\r\n                <h3 className=\"mb-4 pb-2 pb-md-0 mb-md-5 px-md-2\">Login</h3>\r\n                {hasError &&\r\n                <div className=\"alert alert-danger\" role=\"alert\">\r\n                  {ErrorMessage}, Please verify\r\n              </div>\r\n              }\r\n                <form className=\"px-md-2\" onSubmit={handleSubmit}>\r\n                  <div className=\"form-outline mb-4\">\r\n                    <input\r\n                      type=\"text\"\r\n                      className=\"form-control\"\r\n                      id=\"loginId\"\r\n                      placeholder=\"Login Id*\"\r\n                      onChange={(e) =>(handleInputChange(e))}\r\n                      required\r\n                    />\r\n                  </div>\r\n                  <div className=\"form-outline mb-4\">\r\n                    <input\r\n                      type=\"password\"\r\n                      className=\"form-control\"\r\n                      placeholder=\"Password*\"\r\n                      id=\"password\"\r\n                      onChange={(e) =>(handleInputChange(e))}\r\n                      required\r\n                    />\r\n                  </div>\r\n                  <button\r\n                    type=\"submit\"\r\n                    className=\"btn btn-dark btn-lg mb-1\"\r\n                   \r\n                  >\r\n                    Login\r\n                  </button>\r\n                </form>\r\n                <div className=\"text-center mt-5\">\r\n           Not a member?<button type = \"button\" className = \"btn btn-link\" onClick={()=>(navigate(\"/Register\"))}> Register </button>\r\n    </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          </div>\r\n     </div>\r\n     </section>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}