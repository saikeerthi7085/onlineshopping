{"ast":null,"code":"import _slicedToArray from\"C:/Users/saike/Desktop/CTS/onlineshopping_cts_ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useDispatch}from\"react-redux\";import{getAllProducts,SearchProducts}from\"../store/slice/ProductSlice\";import Table from\"react-bootstrap/Table\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CustomerView(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var dispatch=useDispatch();var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),ErrorMessage=_useState4[0],setErrorMessage=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),hasError=_useState6[0],setHasError=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),searchString=_useState8[0],setSearchString=_useState8[1];useEffect(function(){if(products.length===0){getAll();}});function getAll(){dispatch(getAllProducts()).unwrap().then(function(originalPromiseResult){if(originalPromiseResult.isSuccess){setProducts(originalPromiseResult.productslist);}else{setHasError(true);setProducts([]);setErrorMessage(originalPromiseResult.message);return;}}).catch(function(rejectedValueOrSerializedError){setHasError(true);setProducts([]);setErrorMessage(rejectedValueOrSerializedError);return;});}function handleSearch(e){e.preventDefault();setHasError(false);if(searchString===null||searchString===undefined||searchString===\"\"){getAll();}else{setHasError(false);dispatch(SearchProducts({ProductName:searchString})).unwrap().then(function(originalPromiseResult){if(originalPromiseResult.isSuccess){setProducts(originalPromiseResult.productslist);}else{setHasError(true);setProducts([]);setErrorMessage(originalPromiseResult.message);return;}}).catch(function(rejectedValueOrSerializedError){setHasError(true);setErrorMessage(rejectedValueOrSerializedError);return;});}}return/*#__PURE__*/_jsx(\"section\",{className:\"h-100 h-custom\",style:{backgroundColor:\"#8fc4b7\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"container py-5 h-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row d-flex justify-content-center align-items-center h-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-12 col-xl-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card rounded-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body p-4 p-md-5\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Available Products\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"form-inline justify-content-center\",onSubmit:function onSubmit(e){return handleSearch(e);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group m-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"search\",placeholder:\"Search by Product Name\",name:\"search\",onChange:function onChange(e){return setSearchString(e.target.value);},value:searchString}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-dark m-2\",children:\"Search\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-dark m-2 \",onClick:function onClick(e){return setSearchString(e.target.value);},children:\"View All Products\"})]}),/*#__PURE__*/_jsxs(Table,{className:\"table mt-5\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Product Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description \"}),/*#__PURE__*/_jsx(\"th\",{children:\"Features\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price(\\xA3)\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Product Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Available Quantity\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.length>0&&!hasError&&products.map(function(product,key){return/*#__PURE__*/_jsxs(\"tr\",{style:{overflow:\"wrap\"},children:[/*#__PURE__*/_jsx(\"td\",{style:{overflow:\"wrap\",wordBreak:\"break-all\"},children:product.productName}),/*#__PURE__*/_jsx(\"td\",{style:{overflow:\"wrap\",wordBreak:\"break-all\"},children:product.productDescription}),/*#__PURE__*/_jsx(\"td\",{style:{overflow:\"wrap\",wordBreak:\"break-all\"},children:product.features}),/*#__PURE__*/_jsx(\"td\",{style:{overflow:\"wrap\",wordBreak:\"break-all\"},children:product.price}),/*#__PURE__*/_jsx(\"td\",{style:{overflow:\"wrap\",wordBreak:\"break-all\"},children:product.productStatus}),/*#__PURE__*/_jsx(\"td\",{style:{overflow:\"wrap\",wordBreak:\"break-all\"},children:product.availableQuantity})]},key);})})]}),hasError&&/*#__PURE__*/_jsx(\"tr\",{className:\" row d-flex justify-content-center align-items-center h-100\",children:/*#__PURE__*/_jsx(\"td\",{className:\"alert alert-danger\",role:\"alert\",children:ErrorMessage})})]})})})})})});}export default CustomerView;","map":{"version":3,"names":["React","useEffect","useState","useDispatch","getAllProducts","SearchProducts","Table","CustomerView","products","setProducts","dispatch","ErrorMessage","setErrorMessage","hasError","setHasError","searchString","setSearchString","length","getAll","unwrap","then","originalPromiseResult","isSuccess","productslist","message","catch","rejectedValueOrSerializedError","handleSearch","e","preventDefault","undefined","ProductName","backgroundColor","target","value","map","product","key","overflow","wordBreak","productName","productDescription","features","price","productStatus","availableQuantity"],"sources":["C:/Users/saike/Desktop/CTS/onlineshopping_cts_ui/src/components/CustomerView.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { getAllProducts,SearchProducts } from \"../store/slice/ProductSlice\";\r\n\r\nimport Table from \"react-bootstrap/Table\";\r\n\r\nfunction CustomerView() {\r\n  const [products, setProducts] = useState([]);\r\n  const dispatch = useDispatch();\r\n  const [ErrorMessage, setErrorMessage] = useState();\r\n  const [hasError, setHasError] = useState(false);\r\n    const[searchString,setSearchString]=useState();\r\n  useEffect(() => {\r\n    if (products.length === 0) {\r\n      getAll();\r\n    }\r\n  });\r\n  function getAll(){\r\n    dispatch(getAllProducts())\r\n    .unwrap()\r\n    .then((originalPromiseResult) => {\r\n      if (originalPromiseResult.isSuccess) {\r\n        setProducts(originalPromiseResult.productslist);\r\n      } else {\r\n        setHasError(true);\r\n        setProducts([]);\r\n\r\n        setErrorMessage(originalPromiseResult.message);\r\n        return;\r\n      }\r\n    })\r\n    .catch((rejectedValueOrSerializedError) => {\r\n      setHasError(true);\r\n      setProducts([]);\r\n\r\n      setErrorMessage(rejectedValueOrSerializedError);\r\n      return;\r\n    });\r\n  }\r\n function handleSearch(e){\r\n    e.preventDefault();\r\n    setHasError(false);\r\n\r\n    if(searchString===null|| searchString===undefined || searchString===\"\"){\r\n\r\n      getAll();\r\n\r\n    }\r\n    else{\r\n      setHasError(false);\r\n\r\n    dispatch(SearchProducts({ProductName:searchString}))\r\n        .unwrap()\r\n        .then((originalPromiseResult) => {\r\n          if (originalPromiseResult.isSuccess) {\r\n            setProducts(originalPromiseResult.productslist);\r\n          } else {\r\n            setHasError(true);\r\n            setProducts([]);\r\n\r\n            setErrorMessage(originalPromiseResult.message);\r\n            return;\r\n          }\r\n        })\r\n        .catch((rejectedValueOrSerializedError) => {\r\n          setHasError(true);\r\n\r\n          setErrorMessage(rejectedValueOrSerializedError);\r\n          return;\r\n        });\r\n      }\r\n  \r\n }\r\n  return (\r\n    <section className=\"h-100 h-custom\" style={{ backgroundColor: \"#8fc4b7\" }}>\r\n      <div className=\"container py-5 h-100\">\r\n        <div className=\"row d-flex justify-content-center align-items-center h-100\">\r\n          <div className=\"col-lg-12 col-xl-12\">\r\n            <div className=\"card rounded-3\">\r\n              <div className=\"card-body p-4 p-md-5\">\r\n                <h3>Available Products</h3>\r\n\r\n                <form className=\"form-inline justify-content-center\" onSubmit={(e)=>handleSearch(e)}>\r\n                  <div className=\"form-group m-3\">\r\n                    <input\r\n                      type=\"text\"\r\n                      className=\"form-control\"\r\n                      id=\"search\"\r\n                      placeholder=\"Search by Product Name\"\r\n                      name=\"search\"\r\n                      onChange={(e)=>(setSearchString(e.target.value))}\r\n                      value={searchString}\r\n                    />\r\n                     <button type=\"submit\" className=\"btn btn-dark m-2\" >\r\n                    Search\r\n                  </button>\r\n                  </div>\r\n               \r\n              \r\n                  <button type=\"submit\" className=\"btn btn-dark m-2 \"  onClick={(e)=>(setSearchString(e.target.value))}>\r\n                      View All Products\r\n                  </button>\r\n              \r\n                  </form>\r\n\r\n                <Table className=\"table mt-5\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Product Name</th>\r\n                      <th>Description </th>\r\n                      <th>Features</th>\r\n                      <th>Price(Â£)</th>\r\n                      <th>Product Status</th>\r\n                      <th>Available Quantity</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                  \r\n                 \r\n                    \r\n                    {(products.length > 0 && !hasError)&&\r\n                      products.map((product, key) => (\r\n                        <tr key={key} style={{ overflow: \"wrap\" }}>\r\n                          <td\r\n                            style={{ overflow: \"wrap\", wordBreak: \"break-all\" }}\r\n                          >\r\n                            {product.productName}\r\n                          </td>\r\n                          <td\r\n                            style={{ overflow: \"wrap\", wordBreak: \"break-all\" }}\r\n                          >\r\n                            {product.productDescription}\r\n                          </td>\r\n                          <td\r\n                            style={{ overflow: \"wrap\", wordBreak: \"break-all\" }}\r\n                          >\r\n                            {product.features}\r\n                          </td>\r\n                          <td\r\n                            style={{ overflow: \"wrap\", wordBreak: \"break-all\" }}\r\n                          >\r\n                            {product.price}\r\n                          </td>\r\n                          <td\r\n                            style={{ overflow: \"wrap\", wordBreak: \"break-all\" }}\r\n                          >\r\n                            {product.productStatus}\r\n                          </td>\r\n                          <td\r\n                            style={{ overflow: \"wrap\", wordBreak: \"break-all\" }}\r\n                          >\r\n                            {product.availableQuantity}\r\n                          </td>\r\n                        \r\n                        </tr>\r\n                      ))}\r\n                \r\n                  </tbody>\r\n                </Table>\r\n                {hasError&&\r\n                      <tr className=\" row d-flex justify-content-center align-items-center h-100\">\r\n                    <td className=\"alert alert-danger\" role=\"alert\">{ErrorMessage}</td> \r\n                    </tr>\r\n}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default CustomerView;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}