{"ast":null,"code":"import _slicedToArray from\"C:/Users/saike/Desktop/CTS/onlineshopping_cts_ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useDispatch}from\"react-redux\";import{getAllProducts,DeleteProductSlice}from\"../store/slice/ProductSlice\";import Table from\"react-bootstrap/Table\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AdminView(){var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var dispatch=useDispatch();var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),ErrorMessage=_useState4[0],setErrorMessage=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),hasError=_useState6[0],setHasError=_useState6[1];useEffect(function(){if(products.length===0){getAll();}});function getAll(){dispatch(getAllProducts()).unwrap().then(function(originalPromiseResult){if(originalPromiseResult.isSuccess){setProducts(originalPromiseResult.productslist);}else{setHasError(true);setErrorMessage(originalPromiseResult.message);return;}}).catch(function(rejectedValueOrSerializedError){setHasError(true);setErrorMessage(rejectedValueOrSerializedError);return;});}function updateStatusFun(e,product){e.preventDefault();localStorage.setItem(\"Product\",product);navigate(\"/UpdatePRoductStatus\",{state:{ProductDetails:product}});}function DeleteRecordFun(e,product){e.preventDefault();dispatch(DeleteProductSlice({id:product._Id})).unwrap().then(function(originalPromiseResult){if(originalPromiseResult.isSuccess){window.location.reload(true);}else{setHasError(true);setErrorMessage(originalPromiseResult.message);return;}}).catch(function(rejectedValueOrSerializedError){setHasError(true);setErrorMessage(rejectedValueOrSerializedError);return;});}return/*#__PURE__*/_jsx(\"section\",{className:\"h-100 h-custom\",style:{backgroundColor:\"#8fc4b7\"},children:/*#__PURE__*/_jsx(\"div\",{className:\" m-3 py-3 h-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row d-flex justify-content-center align-items-center h-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-12 col-xl-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card rounded-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body p-4 p-md-5\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Admin Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{children:[hasError&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:[ErrorMessage,\", Please verify\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-dark mt-4\",onClick:function onClick(){navigate(\"/AddNewProductsView\");},children:\"Add Product\"})]}),/*#__PURE__*/_jsxs(Table,{className:\"table mt-5 stripped rounded\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Product Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description \"}),/*#__PURE__*/_jsx(\"th\",{children:\"Features\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price(\\xA3)\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Available Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Product Status\"}),/*#__PURE__*/_jsx(\"th\",{}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.length>0&&products.map(function(product,key){return/*#__PURE__*/_jsxs(\"tr\",{style:{overflow:\"wrap\"},children:[/*#__PURE__*/_jsx(\"td\",{className:\"tablestyle\",children:product.productName}),/*#__PURE__*/_jsx(\"td\",{className:\"tablestyle\",children:product.productDescription}),/*#__PURE__*/_jsx(\"td\",{className:\"tablestyle\",children:product.features}),/*#__PURE__*/_jsx(\"td\",{className:\"tablestyle\",children:product.price}),/*#__PURE__*/_jsx(\"td\",{className:\"tablestyle\",children:product.availableQuantity}),/*#__PURE__*/_jsx(\"td\",{className:\"tablestyle\",children:product.productStatus}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-warning\",onClick:function onClick(e){return updateStatusFun(e,product);},children:\"Update status\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:function onClick(e){return DeleteRecordFun(e,product);},children:\"Delete\"})})]},key);})})]})]})})})})})});}export default AdminView;","map":{"version":3,"names":["React","useEffect","useState","useDispatch","getAllProducts","DeleteProductSlice","Table","useNavigate","AdminView","navigate","products","setProducts","dispatch","ErrorMessage","setErrorMessage","hasError","setHasError","length","getAll","unwrap","then","originalPromiseResult","isSuccess","productslist","message","catch","rejectedValueOrSerializedError","updateStatusFun","e","product","preventDefault","localStorage","setItem","state","ProductDetails","DeleteRecordFun","id","_Id","window","location","reload","backgroundColor","map","key","overflow","productName","productDescription","features","price","availableQuantity","productStatus"],"sources":["C:/Users/saike/Desktop/CTS/onlineshopping_cts_ui/src/components/AdminView.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { getAllProducts, DeleteProductSlice } from \"../store/slice/ProductSlice\";\r\nimport Table from \"react-bootstrap/Table\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nfunction AdminView() {\r\n  const navigate = useNavigate();\r\n\r\n  const [products, setProducts] = useState([]);\r\n  const dispatch = useDispatch();\r\n  const [ErrorMessage, setErrorMessage] = useState();\r\n  const [hasError, setHasError] = useState(false);\r\n  useEffect(() => {\r\n    if (products.length === 0) {\r\n      getAll();\r\n    }\r\n  });\r\n  function getAll() {\r\n    dispatch(getAllProducts())\r\n      .unwrap()\r\n      .then((originalPromiseResult) => {\r\n        if (originalPromiseResult.isSuccess) {\r\n          setProducts(originalPromiseResult.productslist);\r\n        } else {\r\n          setHasError(true);\r\n          setErrorMessage(originalPromiseResult.message);\r\n          return;\r\n        }\r\n      })\r\n      .catch((rejectedValueOrSerializedError) => {\r\n        setHasError(true);\r\n        setErrorMessage(rejectedValueOrSerializedError);\r\n        return;\r\n      });\r\n  }\r\n\r\n  function updateStatusFun(e, product) {\r\n    e.preventDefault();\r\n    localStorage.setItem(\"Product\", product);\r\n    navigate(\"/UpdatePRoductStatus\", { state: { ProductDetails: product } });\r\n  }\r\n\r\n  function DeleteRecordFun(e, product){\r\n    e.preventDefault();\r\n    dispatch(DeleteProductSlice({id:product._Id}))\r\n    .unwrap()\r\n    .then((originalPromiseResult) => {\r\n      if (originalPromiseResult.isSuccess) {\r\n        window.location.reload(true);\r\n      } else {\r\n        setHasError(true);\r\n        setErrorMessage(originalPromiseResult.message);\r\n        return;\r\n      }\r\n    })\r\n    .catch((rejectedValueOrSerializedError) => {\r\n      setHasError(true);\r\n      setErrorMessage(rejectedValueOrSerializedError);\r\n      return;\r\n    });\r\n  }\r\n  return (\r\n    <section className=\"h-100 h-custom\" style={{ backgroundColor: \"#8fc4b7\" }}>\r\n      <div className=\" m-3 py-3 h-100\">\r\n        <div className=\"row d-flex justify-content-center align-items-center h-100\">\r\n          <div className=\"col-lg-12 col-xl-12\">\r\n            <div className=\"card rounded-3\">\r\n              <div className=\"card-body p-4 p-md-5\">\r\n                <h3>Admin Dashboard</h3>\r\n                <div>\r\n                {hasError && (\r\n                  <div className=\"alert alert-danger\" role=\"alert\">\r\n                    {ErrorMessage}, Please verify\r\n                  </div>\r\n                )}\r\n                  <button\r\n                    className=\"btn btn-dark mt-4\"\r\n                    onClick={() => {\r\n                      navigate(\"/AddNewProductsView\");\r\n                    }}\r\n                  >\r\n                    Add Product\r\n                  </button>\r\n                </div>\r\n                <Table className=\"table mt-5 stripped rounded\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Product Name</th>\r\n                      <th>Description </th>\r\n                      <th>Features</th>\r\n                      <th>Price(Â£)</th>\r\n                      <th>Available Quantity</th>\r\n                      <th>Product Status</th>\r\n                      <th></th>\r\n                      <th></th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {products.length > 0 &&\r\n                      products.map((product, key) => (\r\n                        <tr key={key} style={{ overflow: \"wrap\" }}>\r\n                          <td className=\"tablestyle\">{product.productName}</td>\r\n                          <td className=\"tablestyle\">\r\n                            {product.productDescription}\r\n                          </td>\r\n                          <td className=\"tablestyle\">{product.features}</td>\r\n                          <td className=\"tablestyle\">{product.price}</td>\r\n                          <td className=\"tablestyle\">\r\n                            {product.availableQuantity}\r\n                          </td>\r\n                          <td className=\"tablestyle\">\r\n                            {product.productStatus}\r\n                          </td>\r\n                          <td>\r\n                            <button\r\n                              className=\"btn btn-warning\"\r\n                              onClick={(e) => updateStatusFun(e, product)}\r\n                            >\r\n                              Update status\r\n                            </button>\r\n                          </td>\r\n                          <td>\r\n                            <button className=\"btn btn-danger\"  onClick={(e) => DeleteRecordFun(e, product)}>Delete</button>\r\n                          </td>\r\n\r\n                        </tr>\r\n                      ))}\r\n                  </tbody>\r\n                </Table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default AdminView;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}